#Численность популяции
--------

###Яндекс ШРИ

Demo: [codepen.io/IPRIT/pen/gpJYMX](http://codepen.io/IPRIT/pen/gpJYMX?editors=001)


# Описание проблемы:
 
В предоставленном листинге переменная `request` в одной области видимости замыкается
тремя функциями `callback`, однако значение переменной `request` меняется на каждой
итерации, и, вследствие ассинхронности функции `getData`, обратный вызов функции
`callback` будет происходить с замкнутой переменной `request`, которая имеет значение
последнего элемента массива `requests` (в текущей версии `apiUrls` — прим.).
Код выполняется неуспешно, вследствие того, что количество ключей объекта `responses`
всегда меньше трех.
 
 
# Решение проблемы:
 
Достаточно замкнуть каждую переменную `request` на соответствующую функцию `callback`
с помощью замыкающей анонимной функции.
```js
var a = 1;
var callback = (function(a){ ... })(a);
```
 
 
# Изменения в решении:
 
В приведенном ниже решении итерирующие переменные имеют локальные значения для устранения
дальнейших пересечений и проблем.
Изменен алгоритм подсчета численности населения для Африки.
 
 
# Аннотация:
 
Диалог с пользователем ведется с помощью `prompt`.
```
/population [city|country|continent] — показывает численность населения для города, страны или континента.
/get cities|countries|continents — показывает список городов, стран или континентов соответственно.
/exit — завершает текущий диалог.
```
 
Для возобновления диалога необходимо отправить в консоль `startDialog()`.